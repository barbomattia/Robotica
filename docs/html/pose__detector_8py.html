<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ROBOTICS PROJECT: /home/mattia/trento_lab_home/ros_ws/src/Robotica/vision_planner/src/vision_planner/pose_detector.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ROBOTICS PROJECT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_175e3d4f5af34234ca7c7608ac2bfd84.html">vision_planner</a></li><li class="navelem"><a class="el" href="dir_d343303dcd6dc49afad74d2cbbd34260.html">src</a></li><li class="navelem"><a class="el" href="dir_553619d386e9829ce28190bd8c638940.html">vision_planner</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pose_detector.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Perform ICP for pose estimation after point cloud pre-processing and cropping.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abdafd081ebe906acafddef3a8d34149d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#abdafd081ebe906acafddef3a8d34149d">vision_planner.pose_detector.load_meshes</a> (mesh_folder)</td></tr>
<tr class="memdesc:abdafd081ebe906acafddef3a8d34149d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the meshes of the blocks as pointclouds.  <a href="pose__detector_8py.html#abdafd081ebe906acafddef3a8d34149d">More...</a><br /></td></tr>
<tr class="separator:abdafd081ebe906acafddef3a8d34149d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a92ba8103e4c2d2d67dc2978baafb80"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a0a92ba8103e4c2d2d67dc2978baafb80">vision_planner.pose_detector.read_yolo_detections</a> (file_path)</td></tr>
<tr class="memdesc:a0a92ba8103e4c2d2d67dc2978baafb80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the YOLO detections from a file.  <a href="pose__detector_8py.html#a0a92ba8103e4c2d2d67dc2978baafb80">More...</a><br /></td></tr>
<tr class="separator:a0a92ba8103e4c2d2d67dc2978baafb80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663dfddb905613148c0af5c5d5b54cb8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a663dfddb905613148c0af5c5d5b54cb8">vision_planner.pose_detector.scale_point_cloud</a> (point_cloud, scale_factor)</td></tr>
<tr class="memdesc:a663dfddb905613148c0af5c5d5b54cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scale a point cloud by a given factor.  <a href="pose__detector_8py.html#a663dfddb905613148c0af5c5d5b54cb8">More...</a><br /></td></tr>
<tr class="separator:a663dfddb905613148c0af5c5d5b54cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefad35c5b6ff1239505d287cdf60106"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#abefad35c5b6ff1239505d287cdf60106">vision_planner.pose_detector.rotate_point_cloud</a> (point_cloud)</td></tr>
<tr class="memdesc:abefad35c5b6ff1239505d287cdf60106"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotate a point cloud by 180 degrees around the x-axis and flip it horizontally.  <a href="pose__detector_8py.html#abefad35c5b6ff1239505d287cdf60106">More...</a><br /></td></tr>
<tr class="separator:abefad35c5b6ff1239505d287cdf60106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a84778f53ed1167a559796f7f311d1a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a9a84778f53ed1167a559796f7f311d1a">vision_planner.pose_detector.create_depth_image_from_point_cloud</a> (point_cloud, intrinsics)</td></tr>
<tr class="memdesc:a9a84778f53ed1167a559796f7f311d1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a depth image from a point cloud.  <a href="pose__detector_8py.html#a9a84778f53ed1167a559796f7f311d1a">More...</a><br /></td></tr>
<tr class="separator:a9a84778f53ed1167a559796f7f311d1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a507ec17c4e093ea11e068dea8e86da14"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a507ec17c4e093ea11e068dea8e86da14">vision_planner.pose_detector.crop_depth_image</a> (yolo_detections, depth_image, intrinsics)</td></tr>
<tr class="memdesc:a507ec17c4e093ea11e068dea8e86da14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crop the depth image to the bounding box of each block.  <a href="pose__detector_8py.html#a507ec17c4e093ea11e068dea8e86da14">More...</a><br /></td></tr>
<tr class="separator:a507ec17c4e093ea11e068dea8e86da14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af074dc36570e9d781e96c06a944e5f10"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#af074dc36570e9d781e96c06a944e5f10">vision_planner.pose_detector.depth_image_to_point_cloud</a> (depth_frame)</td></tr>
<tr class="memdesc:af074dc36570e9d781e96c06a944e5f10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a depth image to a point cloud.  <a href="pose__detector_8py.html#af074dc36570e9d781e96c06a944e5f10">More...</a><br /></td></tr>
<tr class="separator:af074dc36570e9d781e96c06a944e5f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab0dcdf984c13a15059545d715df8e9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a3ab0dcdf984c13a15059545d715df8e9">vision_planner.pose_detector.remove_blue_points_from_point_cloud</a> (point_cloud)</td></tr>
<tr class="memdesc:a3ab0dcdf984c13a15059545d715df8e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove points from a point cloud based on a custom criterion.  <a href="pose__detector_8py.html#a3ab0dcdf984c13a15059545d715df8e9">More...</a><br /></td></tr>
<tr class="separator:a3ab0dcdf984c13a15059545d715df8e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb65e05fc50fec2cecf7cf5d0af67023"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#acb65e05fc50fec2cecf7cf5d0af67023">vision_planner.pose_detector.visualize_depth_frame</a> (depth_image)</td></tr>
<tr class="memdesc:acb65e05fc50fec2cecf7cf5d0af67023"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visualize a depth image.  <a href="pose__detector_8py.html#acb65e05fc50fec2cecf7cf5d0af67023">More...</a><br /></td></tr>
<tr class="separator:acb65e05fc50fec2cecf7cf5d0af67023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61a4ae205676a651ade020525961f5da"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a61a4ae205676a651ade020525961f5da">vision_planner.pose_detector.visualize</a> (element)</td></tr>
<tr class="memdesc:a61a4ae205676a651ade020525961f5da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visualize a point cloud.  <a href="pose__detector_8py.html#a61a4ae205676a651ade020525961f5da">More...</a><br /></td></tr>
<tr class="separator:a61a4ae205676a651ade020525961f5da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa56b13ac88c93972fe065156fed268b4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#aa56b13ac88c93972fe065156fed268b4">vision_planner.pose_detector.min_distance_between_points</a> (point_cloud)</td></tr>
<tr class="memdesc:aa56b13ac88c93972fe065156fed268b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes minimum distance between points in a point cloud.  <a href="pose__detector_8py.html#aa56b13ac88c93972fe065156fed268b4">More...</a><br /></td></tr>
<tr class="separator:aa56b13ac88c93972fe065156fed268b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba19d515ca865147ea70ba7b2649440"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a3ba19d515ca865147ea70ba7b2649440">vision_planner.pose_detector.is_plane</a> (point_cloud)</td></tr>
<tr class="memdesc:a3ba19d515ca865147ea70ba7b2649440"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a point cloud is a plane.  <a href="pose__detector_8py.html#a3ba19d515ca865147ea70ba7b2649440">More...</a><br /></td></tr>
<tr class="separator:a3ba19d515ca865147ea70ba7b2649440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a947d3b52d5cef9cdafb0142aa8d3fb34"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a947d3b52d5cef9cdafb0142aa8d3fb34">vision_planner.pose_detector.find_best</a> (meshes, blocks)</td></tr>
<tr class="memdesc:a947d3b52d5cef9cdafb0142aa8d3fb34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the best pose for each block detected using YOLO.  <a href="pose__detector_8py.html#a947d3b52d5cef9cdafb0142aa8d3fb34">More...</a><br /></td></tr>
<tr class="separator:a947d3b52d5cef9cdafb0142aa8d3fb34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaba5f9bb7a9e7fc9a00946e189787fd5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#aaba5f9bb7a9e7fc9a00946e189787fd5">vision_planner.pose_detector.compute_pose</a> (block_mesh, cropped_point_cloud)</td></tr>
<tr class="memdesc:aaba5f9bb7a9e7fc9a00946e189787fd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the pose of the blocks.  <a href="pose__detector_8py.html#aaba5f9bb7a9e7fc9a00946e189787fd5">More...</a><br /></td></tr>
<tr class="separator:aaba5f9bb7a9e7fc9a00946e189787fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad512b4c73c8c823420f0092d92cfaf0b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#ad512b4c73c8c823420f0092d92cfaf0b">vision_planner.pose_detector.multi_start_pose_detection</a> (mesh, point_cloud, rotations=3)</td></tr>
<tr class="memdesc:ad512b4c73c8c823420f0092d92cfaf0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform multi-start pose detection using ICP.  <a href="pose__detector_8py.html#ad512b4c73c8c823420f0092d92cfaf0b">More...</a><br /></td></tr>
<tr class="separator:ad512b4c73c8c823420f0092d92cfaf0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a97fc30c8150c4ea8f5ecee14c290f7b3"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.classNames</b></td></tr>
<tr class="separator:a97fc30c8150c4ea8f5ecee14c290f7b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab67decd0df09f3392702654084715c79"><td class="memItemLeft" align="right" valign="top"><a id="ab67decd0df09f3392702654084715c79"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#ab67decd0df09f3392702654084715c79">vision_planner.pose_detector.fx</a> = intrinsics.intrinsic_matrix[0, 0]</td></tr>
<tr class="memdesc:ab67decd0df09f3392702654084715c79"><td class="mdescLeft">&#160;</td><td class="mdescRight">center <br /></td></tr>
<tr class="separator:ab67decd0df09f3392702654084715c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3854f07b998aa5c04511d7c2bb50e772"><td class="memItemLeft" align="right" valign="top"><a id="a3854f07b998aa5c04511d7c2bb50e772"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.fy</b> = intrinsics.intrinsic_matrix[1, 1]</td></tr>
<tr class="separator:a3854f07b998aa5c04511d7c2bb50e772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bb620871c4c9cb9b5541fa53ba3b0b7"><td class="memItemLeft" align="right" valign="top"><a id="a5bb620871c4c9cb9b5541fa53ba3b0b7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.cx</b> = intrinsics.intrinsic_matrix[0, 2]</td></tr>
<tr class="separator:a5bb620871c4c9cb9b5541fa53ba3b0b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c1c6d64e64d557b51194487380500a"><td class="memItemLeft" align="right" valign="top"><a id="aa8c1c6d64e64d557b51194487380500a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.cy</b> = intrinsics.intrinsic_matrix[1, 2]</td></tr>
<tr class="separator:aa8c1c6d64e64d557b51194487380500a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c40c3a85f2724e4ef18f44f72367d4"><td class="memItemLeft" align="right" valign="top"><a id="a59c40c3a85f2724e4ef18f44f72367d4"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.norm_X</b> = (int(xmin) + int(xmax)) / 2</td></tr>
<tr class="separator:a59c40c3a85f2724e4ef18f44f72367d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08921314daeb163fc96e9a14969765a5"><td class="memItemLeft" align="right" valign="top"><a id="a08921314daeb163fc96e9a14969765a5"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.norm_Y</b> = (int(ymin) + int(ymax)) / 2</td></tr>
<tr class="separator:a08921314daeb163fc96e9a14969765a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2630d08f49af78f2be4f69c06bc6fc"><td class="memItemLeft" align="right" valign="top"><a id="afc2630d08f49af78f2be4f69c06bc6fc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.depth_value</b> = depth_image[int(norm_Y), int(norm_X)]</td></tr>
<tr class="separator:afc2630d08f49af78f2be4f69c06bc6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4a7d139ec656bee9f85f629fdd8911"><td class="memItemLeft" align="right" valign="top"><a id="a6e4a7d139ec656bee9f85f629fdd8911"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.pc_z</b> = depth_value</td></tr>
<tr class="separator:a6e4a7d139ec656bee9f85f629fdd8911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc62d6afcc5b0fe250d38a213a45a9d"><td class="memItemLeft" align="right" valign="top"><a id="afcc62d6afcc5b0fe250d38a213a45a9d"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.pc_x</b> = (norm_X - cx) * pc_z / fx</td></tr>
<tr class="separator:afcc62d6afcc5b0fe250d38a213a45a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03313849e8f72c1d8e7b0b47d01d45f"><td class="memItemLeft" align="right" valign="top"><a id="af03313849e8f72c1d8e7b0b47d01d45f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.pc_y</b> = -(norm_Y - cy) * pc_z / fy</td></tr>
<tr class="separator:af03313849e8f72c1d8e7b0b47d01d45f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8786b6bfbd19604c16d6c7d1588033a7"><td class="memItemLeft" align="right" valign="top"><a id="a8786b6bfbd19604c16d6c7d1588033a7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.pc</b> = np.array([pc_x, -pc_y, pc_z - 0.023])</td></tr>
<tr class="separator:a8786b6bfbd19604c16d6c7d1588033a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a11f100467381bf5418142d92474127"><td class="memItemLeft" align="right" valign="top"><a id="a1a11f100467381bf5418142d92474127"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a1a11f100467381bf5418142d92474127">vision_planner.pose_detector.pc_min_z</a> = np.min(np.asarray(cropped_point_cloud.points)[:, 2])</td></tr>
<tr class="memdesc:a1a11f100467381bf5418142d92474127"><td class="mdescLeft">&#160;</td><td class="mdescRight">rescaling Move the block mesh and the point cloud to the origin <br /></td></tr>
<tr class="separator:a1a11f100467381bf5418142d92474127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf9ffba249f74a870a082b18f9941d9"><td class="memItemLeft" align="right" valign="top"><a id="a3cf9ffba249f74a870a082b18f9941d9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.m_min_z</b> = np.min(np.asarray(block_mesh.points)[:, 2])</td></tr>
<tr class="separator:a3cf9ffba249f74a870a082b18f9941d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e63773355e42f1f003a8d6be72da30f"><td class="memItemLeft" align="right" valign="top"><a id="a6e63773355e42f1f003a8d6be72da30f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.pc_max_z</b> = np.max(np.asarray(cropped_point_cloud.points)[:, 2])</td></tr>
<tr class="separator:a6e63773355e42f1f003a8d6be72da30f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5d7819c6a739c603e5370c9d4333d13"><td class="memItemLeft" align="right" valign="top"><a id="ae5d7819c6a739c603e5370c9d4333d13"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.mesh_max_z</b> = np.max(np.asarray(block_mesh.points)[:, 2])</td></tr>
<tr class="separator:ae5d7819c6a739c603e5370c9d4333d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ef18e5f4ecf9456664eef8b093f98ee"><td class="memItemLeft" align="right" valign="top"><a id="a2ef18e5f4ecf9456664eef8b093f98ee"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.mesh_min_z</b> = np.min(np.asarray(block_mesh.points)[:, 2])</td></tr>
<tr class="separator:a2ef18e5f4ecf9456664eef8b093f98ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef551f7432e6c03f983d201d3661b42"><td class="memItemLeft" align="right" valign="top"><a id="aaef551f7432e6c03f983d201d3661b42"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.pc_dimension</b> = pc_max_z - pc_min_z</td></tr>
<tr class="separator:aaef551f7432e6c03f983d201d3661b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73c07af632fed06c618a0cf0bf9f9916"><td class="memItemLeft" align="right" valign="top"><a id="a73c07af632fed06c618a0cf0bf9f9916"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.mesh_dimension</b> = mesh_max_z - mesh_min_z</td></tr>
<tr class="separator:a73c07af632fed06c618a0cf0bf9f9916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba1d48009ee615bb57653e24104ebee5"><td class="memItemLeft" align="right" valign="top"><a id="aba1d48009ee615bb57653e24104ebee5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.scale_factor</b> = pc_dimension / mesh_dimension</td></tr>
<tr class="separator:aba1d48009ee615bb57653e24104ebee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c48f1b6ef3f366ae3ee147710a98133"><td class="memItemLeft" align="right" valign="top"><a id="a0c48f1b6ef3f366ae3ee147710a98133"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pose__detector_8py.html#a0c48f1b6ef3f366ae3ee147710a98133">vision_planner.pose_detector.scaled_block_mesh</a> = scale_point_cloud(block_mesh, scale_factor)</td></tr>
<tr class="memdesc:a0c48f1b6ef3f366ae3ee147710a98133"><td class="mdescLeft">&#160;</td><td class="mdescRight">rescaling <br /></td></tr>
<tr class="separator:a0c48f1b6ef3f366ae3ee147710a98133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a95d9a7b2961fde16e505e0b42fcb3"><td class="memItemLeft" align="right" valign="top"><a id="a05a95d9a7b2961fde16e505e0b42fcb3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.min_z</b> = np.min(np.asarray(cropped_point_cloud.points)[:, 2])</td></tr>
<tr class="separator:a05a95d9a7b2961fde16e505e0b42fcb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54fa88eed74fe20bef43b0b8958b70c"><td class="memItemLeft" align="right" valign="top"><a id="aa54fa88eed74fe20bef43b0b8958b70c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.max_z</b> = np.max(np.asarray(cropped_point_cloud.points)[:, 2])</td></tr>
<tr class="separator:aa54fa88eed74fe20bef43b0b8958b70c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a273d81fcb2ba1a30b41132ce46ad44cb"><td class="memItemLeft" align="right" valign="top"><a id="a273d81fcb2ba1a30b41132ce46ad44cb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.m_max_z</b> = np.max(np.asarray(scaled_block_mesh.points)[:, 2])</td></tr>
<tr class="separator:a273d81fcb2ba1a30b41132ce46ad44cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41617a3506a893120d8f428117496bfd"><td class="memItemLeft" align="right" valign="top"><a id="a41617a3506a893120d8f428117496bfd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.cropped_point_cloud</b></td></tr>
<tr class="separator:a41617a3506a893120d8f428117496bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9aa6edebc2973fa6c6c5f6fa52f050b"><td class="memItemLeft" align="right" valign="top"><a id="ad9aa6edebc2973fa6c6c5f6fa52f050b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.rotations</b></td></tr>
<tr class="separator:ad9aa6edebc2973fa6c6c5f6fa52f050b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ff86ee6833becf0eb673b6d723dbbb"><td class="memItemLeft" align="right" valign="top"><a id="a30ff86ee6833becf0eb673b6d723dbbb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.intrinsics</b> = o3d.camera.PinholeCameraIntrinsic(width=1920, height=1080, fx=fx, fy=fy, cx=cx, cy=cy)</td></tr>
<tr class="separator:a30ff86ee6833becf0eb673b6d723dbbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ef71a5d4e36319588df9ee871d1dbf4"><td class="memItemLeft" align="right" valign="top"><a id="a2ef71a5d4e36319588df9ee871d1dbf4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.point_cloud</b> = o3d.io.read_point_cloud(&quot;./mostro.ply&quot;)</td></tr>
<tr class="separator:a2ef71a5d4e36319588df9ee871d1dbf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83edc564c0167fb0dec94f8162eb84f9"><td class="memItemLeft" align="right" valign="top"><a id="a83edc564c0167fb0dec94f8162eb84f9"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.detections_file_path</b> = &quot;./detections.txt&quot;</td></tr>
<tr class="separator:a83edc564c0167fb0dec94f8162eb84f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0edd704b4a396595c47cabf98e78b1"><td class="memItemLeft" align="right" valign="top"><a id="adc0edd704b4a396595c47cabf98e78b1"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.mesh_folder</b> = &quot;./models/&quot;</td></tr>
<tr class="separator:adc0edd704b4a396595c47cabf98e78b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb60f7cc80438d81bfc5c4de507c0b2f"><td class="memItemLeft" align="right" valign="top"><a id="acb60f7cc80438d81bfc5c4de507c0b2f"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.depth_image</b> = create_depth_image_from_point_cloud(point_cloud, intrinsics)</td></tr>
<tr class="separator:acb60f7cc80438d81bfc5c4de507c0b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5256fa79584322c1d63ab83785cb359f"><td class="memItemLeft" align="right" valign="top"><a id="a5256fa79584322c1d63ab83785cb359f"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.meshes</b> = load_meshes(mesh_folder)</td></tr>
<tr class="separator:a5256fa79584322c1d63ab83785cb359f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52aff66926a7d1b9b355bd3cfcb78f31"><td class="memItemLeft" align="right" valign="top"><a id="a52aff66926a7d1b9b355bd3cfcb78f31"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.yolo_detections</b> = read_yolo_detections(detections_file_path)</td></tr>
<tr class="separator:a52aff66926a7d1b9b355bd3cfcb78f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a7503345902c40b17766bf196823281"><td class="memItemLeft" align="right" valign="top"><a id="a9a7503345902c40b17766bf196823281"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.blocks</b> = crop_depth_image(yolo_detections, depth_image, intrinsics)</td></tr>
<tr class="separator:a9a7503345902c40b17766bf196823281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaade1304984d7c302a6105159cb8f440"><td class="memItemLeft" align="right" valign="top"><a id="aaade1304984d7c302a6105159cb8f440"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.results</b> = find_best(meshes, blocks)</td></tr>
<tr class="separator:aaade1304984d7c302a6105159cb8f440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0302043d5cab00bddf7a8fe08b27bec5"><td class="memItemLeft" align="right" valign="top"><a id="a0302043d5cab00bddf7a8fe08b27bec5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>vision_planner.pose_detector.i</b> = 0</td></tr>
<tr class="separator:a0302043d5cab00bddf7a8fe08b27bec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Perform ICP for pose estimation after point cloud pre-processing and cropping. </p>
<h1><a class="anchor" id="libraries_main"></a>
Libraries/Modules</h1>
<ul>
<li>OpenCV (<a href="https://pypi.org/project/opencv-python/">https://pypi.org/project/opencv-python/</a>)</li>
<li>Numpy (<a href="https://numpy.org/">https://numpy.org/</a>)<ul>
<li>Manage point cloud data.</li>
<li>Perform transformations.</li>
</ul>
</li>
<li>Open3D<ul>
<li>Extrapolate data from point clouds.</li>
<li>Perform ICP and get meaningful statistics. </li>
</ul>
</li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aaba5f9bb7a9e7fc9a00946e189787fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaba5f9bb7a9e7fc9a00946e189787fd5">&#9670;&nbsp;</a></span>compute_pose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.compute_pose </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>block_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cropped_point_cloud</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the pose of the blocks. </p>
<p>This function computes the pose of the input block by performing a three step iterative ICP between the point cloud of the block and the mesh of the block, where each iteration is performed with a different pre-rotation around the z-axis. It also performs some pre-processing steps such as scaling and filtering the point cloud.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meshes</td><td>A dictionary containing the point clouds of the meshes </td></tr>
    <tr><td class="paramname">cropped_point_cloud</td><td>The cropped point cloud extracted from the YOLO detection</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage: </p><div class="fragment"><div class="line">compute_pose(meshes, cropped_point_cloud)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.geometry.PointCloud </dd>
<dd>
open3d.geometry.PointCloud.rotate </dd>
<dd>
open3d.geometry.PointCloud.translate </dd>
<dd>
open3d.geometry.PointCloud.get_center </dd>
<dd>
open3d.geometry.PointCloud.points </dd>
<dd>
open3d.utility.Vector3dVector </dd></dl>

</div>
</div>
<a id="a9a84778f53ed1167a559796f7f311d1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a84778f53ed1167a559796f7f311d1a">&#9670;&nbsp;</a></span>create_depth_image_from_point_cloud()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.create_depth_image_from_point_cloud </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>point_cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>intrinsics</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a depth image from a point cloud. </p>
<p>This function projects a point cloud onto a depth image using the camera intrinsics.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point_cloud</td><td>The point cloud to be projected </td></tr>
    <tr><td class="paramname">intrinsics</td><td>The camera intrinsics</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The depth image</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">depth_image = create_depth_image_from_point_cloud(point_cloud, intrinsics)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.camera.PinholeCameraIntrinsic </dd>
<dd>
open3d.geometry.PointCloud </dd>
<dd>
open3d.utility.Vector3dVector </dd></dl>

</div>
</div>
<a id="a507ec17c4e093ea11e068dea8e86da14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a507ec17c4e093ea11e068dea8e86da14">&#9670;&nbsp;</a></span>crop_depth_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.crop_depth_image </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>yolo_detections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>depth_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>intrinsics</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Crop the depth image to the bounding box of each block. </p>
<p>This function crops the depth image to the bounding box of each block detected by YOLO, while also determening the center of each block in the pointcloud coordinates and projecting it to world frame coordinates converting the quaternion transformation parameters to rotation matrix. It also converts the cropped depth image to a point cloud by calling the depth_image_to_point_cloud function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">yolo_detections</td><td>The YOLO detections </td></tr>
    <tr><td class="paramname">depth_image</td><td>The depth image </td></tr>
    <tr><td class="paramname">intrinsics</td><td>The camera intrinsics</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of tuples containing the block identifier, the cropped depth image, and the cropped point cloud</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">blocks = crop_depth_image(yolo_detections, depth_image, intrinsics)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.camera.PinholeCameraIntrinsic </dd>
<dd>
open3d.geometry.PointCloud </dd>
<dd>
open3d.utility.Vector3dVector </dd></dl>

</div>
</div>
<a id="af074dc36570e9d781e96c06a944e5f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af074dc36570e9d781e96c06a944e5f10">&#9670;&nbsp;</a></span>depth_image_to_point_cloud()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.depth_image_to_point_cloud </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>depth_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a depth image to a point cloud. </p>
<p>This function converts a depth image to a point cloud by projecting its depth value into a new space. This is achieved by multiplying the depth value by a constant factor, so that the pixels with depth value close to 0 will remain o a plane, while the other will "emerge".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depth_frame</td><td>The depth image</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The point cloud</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">point_cloud = depth_image_to_point_cloud(depth_frame)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.geometry.PointCloud </dd>
<dd>
open3d.utility.Vector3dVector </dd></dl>

</div>
</div>
<a id="a947d3b52d5cef9cdafb0142aa8d3fb34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a947d3b52d5cef9cdafb0142aa8d3fb34">&#9670;&nbsp;</a></span>find_best()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.find_best </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>meshes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the best pose for each block detected using YOLO. </p>
<p>This function iterates over each block detected using YOLO and attempts to find the best pose for each block by comparing its features with pre-defined meshes. It computes the pose based on the features of the block and its corresponding cropped point cloud with ICP. If the block is successfully identified, its pose is determined and added to the final list after thorough comparison with blocks of the same type. If not, the block is considered critical and its pose is computed based on the missing unidentified blocks still performing ICP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meshes</td><td>A dictionary containing pre-defined meshes for different block types </td></tr>
    <tr><td class="paramname">blocks</td><td>A list containing information about each detected block, including its identifier, center, cropped depth image, and cropped point cloud</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list containing the identified block, its pose (position and orientation), and its center coordinates</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">final_results = find_best(meshes_dict, detected_blocks)</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a3ba19d515ca865147ea70ba7b2649440"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ba19d515ca865147ea70ba7b2649440">&#9670;&nbsp;</a></span>is_plane()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.is_plane </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>point_cloud</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a point cloud is a plane. </p>
<p>This function checks if a point cloud is a plane by fitting a plane to the point cloud using RANSAC. It is used to filter out some possible false positives.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point_cloud</td><td>The point cloud</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the point cloud is a plane, False otherwise</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">is_plane = is_plane(point_cloud)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>numpy.asarray </dd>
<dd>
sklearn.linear_model.RANSACRegressor </dd>
<dd>
numpy.sum </dd></dl>

</div>
</div>
<a id="abdafd081ebe906acafddef3a8d34149d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdafd081ebe906acafddef3a8d34149d">&#9670;&nbsp;</a></span>load_meshes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.load_meshes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mesh_folder</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load the meshes of the blocks as pointclouds. </p>
<p>This function loads the meshes of the blocks from the predefined folder and converts them to point clouds.</p>
<dl class="section return"><dt>Returns</dt><dd>A dictionary containing the point clouds of the meshes</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is a hard-coded setup, hence the function will only work if the folder structure is as follows:<ul>
<li>models<ul>
<li>block_1<ul>
<li>model.config</li>
<li>model.sdf</li>
<li>mesh<ul>
<li>block_1.stl</li>
</ul>
</li>
</ul>
</li>
<li>block_2<ul>
<li>model.config</li>
<li>model.sdf</li>
<li>mesh<ul>
<li>block_2.stl</li>
</ul>
</li>
</ul>
</li>
<li>...</li>
</ul>
</li>
</ul>
</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">mesh_folder = <span class="stringliteral">&quot;./models/&quot;</span></div>
<div class="line">meshes = load_meshes(mesh_folder)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.geometry.PointCloud </dd>
<dd>
open3d.io.read_triangle_mesh </dd>
<dd>
open3d.geometry.PointCloud.sample_points_uniformly </dd>
<dd>
open3d.geometry.PointCloud.rotate </dd>
<dd>
open3d.geometry.PointCloud.translate </dd>
<dd>
open3d.geometry.PointCloud.get_center </dd>
<dd>
open3d.geometry.PointCloud.points </dd>
<dd>
open3d.utility.Vector3dVector </dd>
<dd>
os.listdir </dd>
<dd>
os.path </dd>
<dd>
os.path.isdir </dd>
<dd>
os.path.exists </dd>
<dd>
os.path.join </dd></dl>

</div>
</div>
<a id="aa56b13ac88c93972fe065156fed268b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa56b13ac88c93972fe065156fed268b4">&#9670;&nbsp;</a></span>min_distance_between_points()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.min_distance_between_points </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>point_cloud</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes minimum distance between points in a point cloud. </p>
<p>This function computes the minimum distance between points in a point cloud.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point_cloud</td><td>The point cloud</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The minimum distance between points</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">min_distance = min_distance_between_points(point_cloud)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>numpy.linalg.norm </dd></dl>

</div>
</div>
<a id="ad512b4c73c8c823420f0092d92cfaf0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad512b4c73c8c823420f0092d92cfaf0b">&#9670;&nbsp;</a></span>multi_start_pose_detection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.multi_start_pose_detection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>point_cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rotations</em> = <code>3</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform multi-start pose detection using ICP. </p>
<p>This function performs multi-start pose detection using ICP to align a mesh with a point cloud. It rotates the mesh around the z-axis and performs ICP for each rotation. It prints the best transformation and the corresponding error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mesh</td><td>The mesh </td></tr>
    <tr><td class="paramname">point_cloud</td><td>The point cloud </td></tr>
    <tr><td class="paramname">rotations</td><td>The number of rotations to perform</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The best transformation</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">transformation = multi_start_pose_detection(mesh, point_cloud, rotations=3)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.geometry.PointCloud </dd>
<dd>
open3d.geometry.PointCloud.get_rotation_matrix_from_xyz </dd>
<dd>
open3d.geometry.PointCloud.estimate_normals </dd>
<dd>
open3d.geometry.PointCloud.rotate </dd>
<dd>
open3d.geometry.PointCloud.transform </dd>
<dd>
open3d.pipelines.registration.registration_icp </dd>
<dd>
open3d.pipelines.registration.TransformationEstimationPointToPlane </dd>
<dd>
open3d.pipelines.registration.ICPConvergenceCriteria </dd>
<dd>
numpy.eye </dd>
<dd>
numpy.dot </dd>
<dd>
numpy.linalg.inv </dd>
<dd>
time.sleep </dd></dl>

</div>
</div>
<a id="a0a92ba8103e4c2d2d67dc2978baafb80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a92ba8103e4c2d2d67dc2978baafb80">&#9670;&nbsp;</a></span>read_yolo_detections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.read_yolo_detections </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>file_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the YOLO detections from a file. </p>
<p>This function reads the YOLO detections from a file and returns them as a list of strings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_path</td><td>The path to the file containing the YOLO detections</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of strings containing the YOLO detections</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The file should contain the YOLO detections in the following format: <div class="fragment"><div class="line">block_1: (x, y, w, h)</div>
<div class="line">block_2: (x, y, w, h)</div>
<div class="line">...</div>
</div><!-- fragment --></dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">detections_file_path = <span class="stringliteral">&quot;./detections.txt&quot;</span></div>
<div class="line">yolo_detections = read_yolo_detections(detections_file_path)</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a3ab0dcdf984c13a15059545d715df8e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab0dcdf984c13a15059545d715df8e9">&#9670;&nbsp;</a></span>remove_blue_points_from_point_cloud()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.remove_blue_points_from_point_cloud </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>point_cloud</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove points from a point cloud based on a custom criterion. </p>
<p>This function removes points from a point cloud based on a custom criterion. In this example, we remove points with a normalized depth value less than 155.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point_cloud</td><td>The point cloud</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cropped point cloud</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">cropped_point_cloud = remove_blue_points_from_point_cloud(point_cloud)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.geometry.PointCloud </dd>
<dd>
open3d.utility.Vector3dVector </dd></dl>

</div>
</div>
<a id="abefad35c5b6ff1239505d287cdf60106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abefad35c5b6ff1239505d287cdf60106">&#9670;&nbsp;</a></span>rotate_point_cloud()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.rotate_point_cloud </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>point_cloud</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rotate a point cloud by 180 degrees around the x-axis and flip it horizontally. </p>
<p>This function rotates a point cloud by 180 degrees around the x-axis and flips it horizontally.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point_cloud</td><td>The point cloud to be rotated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The rotated point cloud</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">rotated_point_cloud = rotate_point_cloud(point_cloud)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.geometry.PointCloud </dd>
<dd>
open3d.utility.Vector3dVector </dd></dl>

</div>
</div>
<a id="a663dfddb905613148c0af5c5d5b54cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a663dfddb905613148c0af5c5d5b54cb8">&#9670;&nbsp;</a></span>scale_point_cloud()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.scale_point_cloud </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>point_cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scale_factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scale a point cloud by a given factor. </p>
<p>This function scales a point cloud by a given factor and returns the scaled point cloud.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point_cloud</td><td>The point cloud to be scaled </td></tr>
    <tr><td class="paramname">scale_factor</td><td>The factor by which the point cloud should be scaled</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The scaled point cloud</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The scaling factor should be a positive float value.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">scaled_point_cloud = scale_point_cloud(point_cloud, 0.5)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.geometry.PointCloud </dd>
<dd>
open3d.utility.Vector3dVector </dd></dl>

</div>
</div>
<a id="a61a4ae205676a651ade020525961f5da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61a4ae205676a651ade020525961f5da">&#9670;&nbsp;</a></span>visualize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.visualize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>element</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Visualize a point cloud. </p>
<p>This function visualizes a point cloud with the coordinate frame. It is used mainly for debugging purposes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point_cloud</td><td>The point cloud</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage: </p><div class="fragment"><div class="line">visualize(point_cloud)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>open3d.visualization.draw_geometries </dd>
<dd>
open3d.geometry.TriangleMesh.create_coordinate_frame </dd></dl>

</div>
</div>
<a id="acb65e05fc50fec2cecf7cf5d0af67023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb65e05fc50fec2cecf7cf5d0af67023">&#9670;&nbsp;</a></span>visualize_depth_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def vision_planner.pose_detector.visualize_depth_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>depth_image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Visualize a depth image. </p>
<p>This function visualizes a depth image using a color map. It is used mainly for debugging purposes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depth_image</td><td>The depth image</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage: </p><div class="fragment"><div class="line">visualize_depth_frame(depth_image)</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>cv2.normalize </dd>
<dd>
cv2.applyColorMap </dd>
<dd>
cv2.imshow </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a97fc30c8150c4ea8f5ecee14c290f7b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97fc30c8150c4ea8f5ecee14c290f7b3">&#9670;&nbsp;</a></span>classNames</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list vision_planner.pose_detector.classNames</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  [</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="stringliteral">&quot;X1-Y1-Z2&quot;</span>,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    <span class="stringliteral">&quot;X1-Y2-Z1&quot;</span>,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    <span class="stringliteral">&quot;X1-Y2-Z2&quot;</span>,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    <span class="stringliteral">&quot;X1-Y2-Z2-CHAMFER&quot;</span>,</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    <span class="stringliteral">&quot;X1-Y2-Z2-TWINFILLET&quot;</span>,</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    <span class="stringliteral">&quot;X1-Y3-Z2&quot;</span>,</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="stringliteral">&quot;X1-Y3-Z2-FILLET&quot;</span>,</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <span class="stringliteral">&quot;X1-Y4-Z1&quot;</span>,</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="stringliteral">&quot;X1-Y4-Z2&quot;</span>,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    <span class="stringliteral">&quot;X2-Y2-Z2&quot;</span>,</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <span class="stringliteral">&quot;X2-Y2-Z2-FILLET&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;]</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
